<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Firebase Hosting</title>

  <!-- update the version number as needed -->
  <!-- <script defer src="/__/firebase/7.11.0/firebase-app.js"></script>

  <script defer src="/__/firebase/7.11.0/firebase-auth.js"></script>
  <script defer src="/__/firebase/7.11.0/firebase-database.js"></script>


  <script defer src="/__/firebase/init.js"></script> -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>



<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
<!-- <script type="text/javascript">
  const firebase = require("firebase");
  // Required for side-effects
  require("firebase/firestore");
</script> -->


<style media="screen">
  /* Container holding the image and the text */

  /* Centered text */
  .centered {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  #titleOfPage {
    font-size: 70px;
    font-weight: 900;
  }
</style>


<body>

  <!-- <script src="/__/firebase/7.11.0/firebase-app.js"></script> -->



  <script type="text/javascript">
    // Initialize Cloud Firestore through Firebase
    firebase.initializeApp({
      apiKey: "AIzaSyAbP6Ul0V4XeeKksseTkMAvyGjXNVpGdTY",
    authDomain: "copy-7b6d4.firebaseapp.com",
    projectId: "copy-7b6d4",

    });

    var db = firebase.firestore();
  </script>
  <!-- <script src="/__/firebase/7.11.0/firebase-analytics.js"></script> -->

  <!-- Initialize Firebase -->
  <!-- <script src="/__/firebase/init.js"></script> -->




  <script type="text/javascript">
    function function1() {
      db.collection("users").add({
    first: "Ada",
    last: "Lovelace",
    born: 1815
})
.then(function(docRef) {
    console.log("Document written with ID: ", docRef.id);
})
.catch(function(error) {
    console.error("Error adding document: ", error);
});
      var words = document.getElementById("myTextarea").value;

      console.log(words);

      var xhr = new XMLHttpRequest()
      xhr.open('POST', 'https://nandemo-proj.work/api/v1/copipe', true)
      xhr.setRequestHeader("Content-Type", "application/json")
      var data = JSON.stringify({
        "text": words
      });

      xhr.send(data)
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          var somevalue = xhr.responseText
          somevalue = somevalue.slice(1);

          // Removing the last character
          somevalue = somevalue.slice(0, somevalue.length - 1);

          document.getElementById("demo").innerHTML = somevalue;

        }
      }
    }
  </script>
  <div class="">
    <img src="images/work.jpg" style="width:100%;">
    <div class="centered">
      <h1 id="titleOfPage">コピっぺ</h1>
    </div>
  </div>
  <br>
  <div class="container">
    <h4>使い方</h4>
    <p>1. したのフォームにコピペしたい文章を入力してください。</p>
    <p>2. コピペボタンを押すと、自然言語処理などを施し変形された文章が出力されます。</p>
    <p>3. それをコピペして終わりです！</p>

  </div>
  <div class="container">
    <form class="" action="index.html" method="post">
      <textarea id="myTextarea" name="name" rows="8" cols="80"></textarea>
      <!-- <input type="submit" value="Submit" > -->
      <button type="button" onclick="function1()" name="button">click</button>

    </form>
  </div>
  <div class="container">
    <p id="demo"></p>
  </div>

</body>

</html>


<!--
エンドポイント
POST https://nandemo-proj.work/api/v1/copipe
リクエストヘッダー
Content-type: application/json
Accept: application/json

リクエストボディ
{
    "text":"また、厚生労働省の「精神疾患による患者数」によると精神疾患の患者数は年々増加しており平成29年には400万人を超えた。"
レスポンスボディ
{
    "text":"厚生労働省「精神疾患による患者数」によると、精神疾患患者の数は年々増加しており、2017年には400万人を超えています。"
} -->
